<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="/assets/images/icon.png" type="image/x-icon">
  <link rel="shortcut icon" href="/assets/images/icon.png" type="image/x-icon">
  <title>Projet POSCO</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@latest/dist/tailwind.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
  <script src="/js/main.js" defer></script>
</head>

<body>
  <!-- header -->
  <header class="bg-gray-800 text-white p-4 md:py-4 h-25">
    <div class="container mx-auto flex justify-between items-center">
        <div class="flex items-center">
            <a href="index.html"><img src="/assets/images/icon.png" alt="Projet Logo" class="h-16 mr-3"></a>
            <a href="index.html"><span class="font-bold text-xl">Projet POSCO</span></a>
        </div>
        <nav>
            <ul class="flex space-x-10">
                <li><a href="index.html" class="hover:text-gray-300"><i class="fas fa-clipboard fa-lg mr-2"></i>Questionnaire</a></li>
                <li><a href="references.html" class="hover:text-gray-300"><i class="fas fa-chart-bar fa-lg mr-2"></i>Références</a></li>
                <li><a href="actions.html" class="hover:text-gray-300"><i class="fas fa-lightbulb fa-lg mr-2"></i>Actions</a></li>
            </ul>
        </nav>
        <div class="flex items-center">
            <i class="fas fa-user-circle fa-2x mr-2"></i>
            <a href="index.html"><span>Profil</span></a>
        </div>
    </div>
  </header>

  <!-- content -->
<!--   <div id="myModal">
    <span id="closeButton" style="cursor: pointer; float: right;">&times;</span>
    <div class="container mx-auto p-4">
      <h1 class="text-3xl font-bold text-center text-blue-500">Questionnaire</h1>
    </div>
  

    <label for="number1">A quelle distance (en km) habitez vous d'Efrei ?</label>
    <input type="number" id="number1" required><br>

    <label for="transportMode">Comment vous déplacez-vous :</label>
    <select id="transportMode">
      <option value="3">Voiture</option>
      <option value="2">Transport en commun</option>
      <option value="0">À pied</option>
    </select><br>

    <label for="meatFrequency">Combien de fois par semaine mangez-vous de la viande ?</label>
    <input type="number" id="meatFrequency" required><br>

    <button id="calculateButton">Calculer</button>
    <p id="error" style="color: red;"></p>
    <p>Résultat : <span id="result"></span></p>
    <button id="retryButton">Réessayer</button>
  </div> -->

  <div id="content" class="h-auto min-h-screen mt-25 mb-25 pt-10 m-10 border-4 border-dashed border-blue-100">
    
  </div>

<!--   <div class="border-4 border-dashed border-blue-300 m-10 p-10">
    This is a test
  </div> -->

  <!-- footer -->
  <footer class="bg-gray-800 text-white p-4 h-100">
    <div class="container mx-auto flex justify-between">
        <div class="w-1/4 items-center flex flex-col p-4">
            <img src="/assets/images/efrei.png" alt="Efrei Logo" class="h-14 mb-4">
            <div>
              <p>&copy; 2024</p>
            </div>
        </div>
        <div class="w-1/4 p-2">
            <h3 class="text-lg font-bold p-1 mb-3"><i class="fas fa-envelope mr-4"></i>Contactez-nous :</h3>
            <ul class="p-1 items-center">
              <p>Email : projet.posco@efrei.fr</p>
              <p>Tél : +01 23 45 67 89</p>
            </ul>
        </div>
        <div class="w-1/2 p-2">
            <h3 class="text-lg font-bold p-1 mb-2"><i class="fas fa-globe mr-3"></i>Aller au plus loin :</h3>
            <ul>
                <li><a href="https://nosgestesclimat.fr" class="hover:text-gray-300">Nos Gestes Climat - ADEME</a></li>
                <li><a href="https://www.myclimate.org/fr-ch/" class="hover:text-gray-300">Myclimate - Shape our future</a></li>
                <li><a href="https://offset.climateneutralnow.org/footprintcalc" class="hover:text-gray-300">United Nations - Plate forme de compensation carbone</a></li>
            </ul>
        </div>
    </div>
  </footer>


<script>
  var countryEmissions = {
    stokeontrent: { train: 4.4, bus: 22, avion: 129, voiture: 159 },
    pologne: { train: 10, bus: 46, avion: 229, voiture: 338 },
    hongrie: { train: 10, bus: 44, avion: 224, voiture: 326 },
    tcheque: { train: 8, bus: 41, avion: 207, voiture: 306 },
    montreal: { train: 0, bus: 0, avion: 835, voiture: 0 },
    malaisie: { train: 0, bus: 0, avion: 1581, voiture: 0 },
    afrique: { train: 0, bus: 0, avion: 2767, voiture: 0 },
    toronto: { train: 0, bus: 0, avion: 910, voiture: 0 },
    etatsunis: { train: 0, bus: 0, avion: 1380, voiture: 0 },
    portsmouth: { train: 3.7, bus: 17, avion: 76, voiture: 122 },
    tallinn: { train: 16, bus: 75, avion: 332, voiture: 557 },
    vilnius: { train: 13, bus: 62, avion: 303, voiture: 456 },
    espagne: { train: 11, bus: 53, avion: 260, voiture: 391 },
  };


  var questions = [
    '<div class="flex flex-col items-center p-10 m-10 border-4 border-dashed border-blue-300"><p class="mb-4">Question 1 : A quelle distance (en km) habitez-vous d\'Efrei ?</p> <input type="number" id="answer1" class="border border-blue-500 rounded mb-4"/>',
    '<div class="flex flex-col items-center p-10 m-10 border-4 border-dashed border-blue-300"><p class="mb-4">Question 2 : Comment vous déplacez-vous pour vous y rendre ?</p> <select id="answer2" class="mb-4"><option value="voiture">Voiture</option><option value="avion">Avion</option><option value="transport">Transport en commun</option><option value="pied">A pied</option></select>',
    '<div class="flex flex-col items-center p-10 m-10 border-4 border-dashed border-blue-300"><p class="mb-4">Question 3 : Combien de fois par semaine mangez-vous de la viande ?</p> <input type="number" id="answer3" class="border border-blue-500 rounded mb-4"/>',
    '<div class="flex flex-col items-center p-10 m-10 border-4 border-dashed border-blue-300"><p class="mb-4">Question 4 : Quelle destination envisagez-vous pour la mobilité L3 ?</p> <select id="answer4" class="mb-4"><option value="stokeontrent">Stoke-on-Trent, Angleterre</option><option value="pologne">Cravovie, Pologne</option><option value="hongrie">Budapest, Hongrie</option><option value="tcheque">Ostrava, République Tchèque</option><option value="montreal">Montréal, Canada</option><option value="toronto">Toronto, Canada</option><option value="malaisie">Kuala Lumpur, Malaisie</option><option value="afrique">Le Cap, Afrique du Sud</option><option value="etatsunis">Irvine, Etats-Unis</option><option value="portsmouth">Portsmouth, Angleterre</option><option value="tallinn">Tallinn, Estonie</option><option value="vilnius">Vilnius, Lituanie</option><option value="malaga">Malaga, Espagne</option></select>',
    '<div class="flex flex-col items-center p-10 m-10 border-4 border-dashed border-blue-300"><p class="mb-4">Question 5 : Par quels moyens comptez-vous y aller ?</p> <select id="answer5" class="mb-5"><option value="train">Train</option><option value="bus">Bus</option><option value="avion">Avion</option><option value="voiture">Voiture</option></select>',
  ];
  var currentQuestionIndex = 0;
  const results = [];
  var destinationsWithEnvoyer = ['montreal', 'toronto', 'malaisie', 'afrique', 'etatsunis'];
  var suivantButtonHTML = '<button onclick="loadNextQuestion()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"><span>Suivant</span><i class="fas fa-arrow-right ml-2"></i></button></div>';
  var envoyerButtonHTML = '<button onclick="returnResult(results)" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"><span>Envoyer</span><i class="fas fa-paper-plane ml-2"></i></button></div>';
  var reessayerButtonHTML = '<button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"><a href="index.html"><span>Réessayer</span><i class="fas fa-redo ml-2"></i></a></button></div>';


  function loadNextQuestion() {
    if (currentQuestionIndex > 0) {
      var answer = document.getElementById('answer' + currentQuestionIndex);
      if (answer) {
          results[currentQuestionIndex - 1] = answer.value;
      }
    }

    if (currentQuestionIndex < questions.length) {
        if (currentQuestionIndex == 4 && (results[currentQuestionIndex - 1] == "montreal" || results[currentQuestionIndex - 1] == "toronto" || results[currentQuestionIndex - 1] == "malaisie" || results[currentQuestionIndex - 1] == "afrique" || results[currentQuestionIndex - 1] == "etatsunis")) {
          var result = calculateResult(results);
          //document.getElementById('content').innerHTML = '<div class="flex flex-col items-center"><p class="mb-4">Résultat de votre carbon emission : ' + result + ' kg </p> <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"><a href="index.html"><span>Réessayer</span><i class="fas fa-redo ml-2"></i></a></button></div>';
          document.getElementById('content').innerHTML = '<div class="flex flex-col items-center"><p class="mb-4">Etes-vous sûr d\'envoyer ce questionnaire ?</p>' + envoyerButtonHTML;
        } else {
          document.getElementById('content').innerHTML = questions[currentQuestionIndex] + suivantButtonHTML;
          currentQuestionIndex++;
        }
    } else {
        var result = calculateResult(results);
        //document.getElementById('content').innerHTML = '<div class="flex flex-col items-center"><p class="mb-4">Résultat de votre carbon emission : ' + result + ' kg </p> <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded inline-flex items-center"><a href="index.html"><span>Réessayer</span><i class="fas fa-redo ml-2"></i></a></button></div>';
        document.getElementById('content').innerHTML = '<div class="flex flex-col items-center p-10 m-10 border-4 border-dashed border-blue-300"><p class="mb-4">Etes-vous sûr d\'envoyer vos réponses ?</p>' + envoyerButtonHTML;
      }
  }

  function returnResult(results){
    document.getElementById('content').innerHTML = '<div class="flex flex-col items-center p-10 m-10 border-4 border-dashed border-blue-300"><p class="mb-4">Résultat de votre carbon emission : ' + calculateResult(results)  + ' kg </p>' + reessayerButtonHTML + '<div class="flex flex-col items-center p-10 m-10 border-4 border-dashed border-blue-500"><p class="mb-4">Vos réponses:</p><pre>' + displayAnswer(results) + '</pre></div>';

  }

  function calculateResult(results) {
    var total = 0;
    var resultsList = '';

    for (var i = 0; i < results.length; i++) {
        if (results[i] == "stokeontrent" || results[i] == "pologne" || results[i] == "hongrie" || results[i] == "tcheque" || results[i] == "portsmouth" || results[i] == "tallinn" || results[i] == "vilnius" || results[i] == "espagne") {
          total += countryEmissions[results[i]][results[i+1]];
        } else if (results[i] == "montreal" || results[i] == "malaisie" || results[i] == "afrique" || results[i] == "toronto" || results[i] == "etatsunis") {
          total += countryEmissions[results[i]].avion;
        } else {
          total += parseInt(results[i], 10) || 0;
        }
        resultsList += 'Question ' + (i + 1) + ': ' + results[i] + '\n';
    }

    //document.getElementById('anwsers').innerHTML += '<p>Réponses:</p><pre>' + resultsList + '</pre>';
    //console.log('List of Results:\n' + resultsList);

    return total;
  }

  function displayAnswer(results) {
    var resultsList = '';
    for (var i = 0; i < results.length; i++) {
      resultsList += 'Question ' + (i + 1) + ': ' + results[i] + '\n';
    }
    return resultsList;
  }

  function suivant() {
    var contentDiv = document.getElementById('content');
    var someCondition = true; 
    if (someCondition) {
        contentDiv.innerHTML = '<p>Displaying some text because the condition is true.</p>';
    } else {
        contentDiv.innerHTML = '<p>Displaying other things because the condition is false.</p>';
    }
  }

  function retry() {
    var contentDiv = document.getElementById('content');
    var someCondition = true; 
    if (someCondition) {
        contentDiv.innerHTML = '<p>Reprendre le test...</p>';
    } else {
        contentDiv.innerHTML = '<p>Displaying other things because the condition is false.</p>';
    }
  }

  window.onload = loadNextQuestion;
</script> 

</body>
</html>
